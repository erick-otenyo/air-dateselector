!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AirDateselector=t():e.AirDateselector=t()}(this,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>N});const s="days",i="months",a="changeViewDate",n="changeFocusDate",o="changeSelectedDate",r={classes:"",inline:!1,locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",keyboardNav:!0,selectedDate:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,monthsField:"monthsShort",showEvent:"focus",autoClose:!0,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function h(){let{tagName:e="div",className:t="",innerHtml:s="",id:i="",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement(e);return t&&n.classList.add(...t.split(" ")),i&&(n.id=i),s&&(n.innerHTML=s),a&&function(e,t){for(let[s,i]of Object.entries(t))void 0!==i&&e.setAttribute(s,i)}(n,a),n}function d(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function c(e){let t=e.getHours(),{hours:s,dayPeriod:i}=function(e){return{dayPeriod:e>11?"pm":"am",hours:e%12==0?12:e%12}}(t);return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:u(t),hours12:s,dayPeriod:i,fullHours12:u(s),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function u(e){return e<10?"0"+e:e}function p(e){let t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function y(){let e=[];for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.forEach((t=>{if("object"==typeof t)for(let s in t)t[s]&&e.push(s);else t&&e.push(t)})),e.join(" ")}function D(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;if(!e||!t)return!1;let n=c(e),o=c(t);return{[s]:n.date===o.date&&n.month===o.month&&n.year===o.year,[i]:n.month===o.month&&n.year===o.year,years:n.year===o.year}[a]}function v(e,t,s){let i=f(e,!1).getTime(),a=f(t,!1).getTime();return s?i>=a:i>a}function m(e,t){return!v(e,t,!0)}function f(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=new Date(e.getTime());return"boolean"!=typeof t||t||function(e){e.setHours(0,0,0,0)}(s),s}function g(e,t,s){e.length?e.forEach((e=>{e.addEventListener(t,s)})):e.addEventListener(t,s)}function w(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:w(e.parentNode,t))}function b(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return s.filter((e=>e)).forEach((t=>{for(let[s,i]of Object.entries(t))if(void 0!==i&&"[object Object]"===i.toString()){let t=void 0!==e[s]?e[s].toString():void 0,a=i.toString(),n=Array.isArray(i)?[]:{};e[s]=e[s]?t!==a?n:e[s]:n,b(e[s],i)}else e[s]=i})),e}function _(e){let t=e;return e instanceof Date||(t=new Date(e)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${e}" to Date object`),t=!1),t}function $(e){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}class M{constructor(){let{date:e,dp:t,opts:s,body:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.date=e,this.dp=t,this.opts=s,this.body=i,this.customData=!1,this.init()}init(){this.dp.includeDates&&this.dp.includeDates.find((e=>D(e,this.date)))||(this.customData={disabled:!0}),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&this._handleSelectedStatus()}_bindDatepickerEvents(){this.dp.on(o,this.onChangeSelectedDate),this.dp.on(n,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(o,this.onChangeSelectedDate),this.dp.off(n,this.onChangeFocusDate)}_createElement(){let{year:e,month:t,date:s}=c(this.date),i=this.customData?.attrs||{};this.$cell=h({className:this._getClassName(),attrs:{"data-year":e,"data-month":t,"data-date":s,...i}})}_getClassName(){let e=new Date,{selectOtherMonths:t}=this.opts,{minDate:s,maxDate:i}=this.dp,{day:a}=c(this.date),n=this._isOutOfMinMaxRange(),o=this.customData?.disabled,r=y("air-dateselector-cell","-day-",{"-current-":D(e,this.date),"-min-date-":s&&D(s,this.date),"-max-date-":i&&D(i,this.date)});const l=y({"-weekend-":this.dp.isWeekend(a),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!t||n||o});return y(r,l,this.customData?.classes)}_getHtml(){let{date:e}=c(this.date),{showOtherMonths:t}=this.opts;return this.customData?.html?this.customData.html:!t&&this.isOtherMonth?"":e}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{date:s}=this,{month:i,year:a,date:n}=c(s),o=!!e&&new Date(a,i,n),r=!!t&&new Date(a,i,n);return e&&t?m(o,e)||v(r,t):e?m(o,e):t?v(r,t):void 0}destroy(){this.unbindDatepickerEvents()}focus=()=>{this.$cell.classList.add("-focus-"),this.focused=!0};removeFocus=()=>{this.$cell.classList.remove("-focus-"),this.focused=!1};select=()=>{this.$cell.classList.add("-selected-"),this.selected=!0};removeSelect=()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1};_handleSelectedStatus(){let e=this.dp._checkIfDateIsSelected(this.date);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){D(this.dp.focusDate,this.date)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}onChangeSelectedDate=()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())};onChangeFocusDate=e=>{if(!e)return void(this.focused&&this.removeFocus());let t=D(e,this.date);t?this.focus():!t&&this.focused&&this.removeFocus()};render=()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)}const k=".air-dateselector-cell";class C{constructor(e){let{dp:t,opts:s}=e;this.dp=t,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:e,dynamicRange:t}=this.opts;g(this.$el,"mouseover",this.onMouseOverCell),g(this.$el,"mouseout",this.onMouseOutCell),g(this.$el,"click",this.onClickBody),e&&t&&(g(this.$el,"mousedown",this.onMouseDown),g(this.$el,"mousemove",this.onMouseMove),g(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(a,this.onChangeViewDate)}_buildBaseHtml(){this.$el=h({className:"air-dateselector-body -days-",innerHtml:'<div class="air-dateselector-body--day-names"></div><div class="air-dateselector-body--cells -days-"></div>'}),this.$names=l(".air-dateselector-body--day-names",this.$el),this.$cells=l(".air-dateselector-body--cells",this.$el)}_getDayNamesHtml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",s=this.dp.isWeekend,{onClickDayName:i}=this.opts,a=e,n=0;for(;n<7;){let e=a%7;t+=`<div class="${y("air-dateselector-body--day-name",{"-weekend-":s(e),"-clickable-":!!i})}" data-day-index='${e}'>${this.dp.locale.daysMin[e]}</div>`,n++,a++}return t}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(e){let{dp:t,opts:s}=this;return new M({dp:t,opts:s,date:e,body:this})}_generateCells(){DatepickerBody.getDaysDates(this.dp,(e=>{this.cells.push(this._generateCell(e))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((e=>e.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(a,this.onChangeViewDate)}handleClick=e=>{let t=e.target.closest(k).adpCell;t.isDisabled||(this.dp.isMinViewReached?this.dp._checkIfDateIsSelected(t.date)||this.dp.selectDate(t.date):this.dp.down())};handleDayNameClick=e=>{let t=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(t),datepicker:this.dp})};onMouseOverCell=e=>{let t=w(e.target,k);this.dp.setFocusDate(!!t&&t.adpCell.date)};onMouseOutCell=()=>{this.dp.setFocusDate(!1)};onClickBody=e=>{let{onClickDayName:t}=this.opts,s=e.target;s.closest(k)&&this.handleClick(e),t&&s.closest(".air-dateselector-body--day-name")&&this.handleDayNameClick(e)};onMouseDown=e=>{this.pressed=!0;let t=w(e.target,k),s=t&&t.adpCell;D(s.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),D(s.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)};onMouseUp=()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1};onChangeViewDate=(e,t)=>{this.isVisible&&(D(e,t,i)||this.render())};render=()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((e=>{this.$cells.appendChild(e.render())}))};static getDaysDates(e,t){let{viewDate:s,locale:{firstDay:i}}=e,a=d(s),{year:n,month:o}=c(s),r=new Date(n,o,1),l=new Date(n,o,a),h=r.getDay()-i,u=6-l.getDay()+i;h=h<0?h+7:h,u=u>6?u-7:u;let p=function(e,t){let{year:s,month:i,date:a}=c(e);return new Date(s,i,a-t)}(r,h),y=a+h+u,D=p.getDate(),{year:v,month:m}=c(p),f=0;const g=[];for(;f<y;){let e=new Date(v,m,D+f);t&&t(e),g.push(e),f++}return g}}class S{constructor(e){let{dp:t,opts:s}=e;this.dp=t,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=l(".air-datepicker-nav--title",this.$el),this.$prev=l('[data-action="prev"]',this.$el),this.$next=l('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav)}_bindDatepickerEvents(){this.dp.on(a,this.onChangeViewDate),this.isNavIsFunction&&this.dp.on(o,this.renderDelay)}destroy(){this.dp.off(a,this.onChangeViewDate),this.isNavIsFunction&&this.dp.off(o,this.renderDelay)}_createElement(){this.$el=h({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,s=t.navTitles.days;return"function"==typeof s?s(e):e.formatDate(e.viewDate,s)}handleNavStatus(){let{disableNavWhenOutOfRange:e}=this.opts,{minDate:t,maxDate:s}=this.dp;if(!t&&!s||!e)return;let{year:i,month:a}=this.dp.parsedViewDate,n=!!t&&c(t),o=!!s&&c(s);t&&n.month>=a&&n.year>=i&&this._disableNav("prev"),s&&o.month<=a&&o.year<=i&&this._disableNav("next")}_disableNav(e){l('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];e.length?e.forEach((e=>{e.classList.remove(...s)})):e.classList.remove(...s)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}onClickNav=e=>{let t=w(e.target,".air-datepicker-nav--action");if(!t)return;let s=t.dataset.action;this.dp[s]()};onChangeViewDate=()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()};_buildBaseHtml(){let{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${e}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${t}</div>`}get isNavIsFunction(){let{navTitles:e}=this.opts;return Object.keys(e).find((t=>"function"==typeof e[t]))}update=()=>{let{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()};renderDelay=()=>{setTimeout(this.render)};render=()=>{this.$title.innerHTML=this._getTitle()}}class F{pressedKeys=new Set;hotKeys=new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]]);constructor(e){let{dp:t,opts:s}=e;this.dp=t,this.opts=s,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:e}=this.dp;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:e}=this.dp;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,selectedDate:t,parsedViewDate:{year:s,month:i}}=this.dp,a=e||t;return a||(a=new Date(s,i,(new Date).getDate())),a}focusNextCell(e){let t=c(this.getInitialFocusDate()),s=t.year,i=t.month,a=t.date;switch(e){case"ArrowLeft":a-=1;break;case"ArrowUp":a-=7;break;case"ArrowRight":a+=1;break;case"ArrowDown":a+=7}let n=this.dp.getClampedDate(new Date(s,i,a));this.dp.setFocusDate(n,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}handleHotKey=e=>{let t=this.hotKeys.get(e),s=c(this.getInitialFocusDate());t(s,this.dp);let{year:i,month:a,date:n}=s,o=d(new Date(i,a));o<n&&(n=o);let r=this.dp.getClampedDate(new Date(i,a,n));this.dp.setFocusDate(r,{viewDateTransition:!0})};isHotKeyPressed=()=>{let e=!1,t=this.pressedKeys.size,s=e=>this.pressedKeys.has(e);for(let[i]of this.hotKeys){if(e)break;if(Array.isArray(i[0]))i.forEach((a=>{e||t!==a.length||(e=a.every(s)&&i)}));else{if(t!==i.length)continue;e=i.every(s)&&i}}return e};isArrow=e=>e>=37&&e<=40;onKeyDown=e=>{let{key:t,which:s}=e,{dp:i,dp:{focusDate:a},opts:n}=this;this.registerKey(t);let o=this.isHotKeyPressed();if(o)return e.preventDefault(),void this.handleHotKey(o);if(this.isArrow(s))return e.preventDefault(),void this.focusNextCell(t);if("Enter"===t&&a){let e=i._checkIfDateIsSelected(a);e?i._handleAlreadySelectedDates(e,a):i.selectDate(a)}else"Escape"===t&&this.dp.hide()};onKeyUp=e=>{this.removeKey(e.key)}}let A={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter((e=>e!==t)))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.__events&&this.__events[e]&&this.__events[e].forEach((e=>{e(...s)}))}},E="",O="",L=!1;class N{static defaults=r;static version="3.4.0";static defaultGlobalContainerId="air-dateselector-global-container";static buildGlobalContainer(e){L=!0,E=h({className:e,id:e}),l("body").appendChild(E)}constructor(e,t){if(this.$el=l(e),!this.$el)return;this.$datepicker=h({className:"air-dateselector"}),this.opts=b({},r,t),this.$customContainer=!!this.opts.container&&l(this.opts.container),this.$altField=l(this.opts.altField||!1);let{startDate:s}=this.opts;s||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=_(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.selectedDates=[],this.calendarView=!1,this.keys=[],this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:e,treatAsInline:t,opts:{inline:s,isMobile:i,selectedDates:a,keyboardNav:n}}=this,o=l("body");(!L||L&&E&&!o.contains(E))&&!s&&this.elIsInput&&!this.$customContainer&&Datepicker.buildGlobalContainer(Datepicker.defaultGlobalContainerId),!i||O||t||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createIncludeDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(s||this._bindEvents(),n&&(this.keyboardNav=new F({dp:this,opts:e}))),a&&this.selectDate(a,{silent:!0}),this.opts.visible&&!t&&this.show(),i&&!t&&this.$el.setAttribute("readonly",!0),t&&this._createComponents()}_createMobileOverlay(){O=h({className:"air-dateselector-overlay"}),E.appendChild(O)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:s,position:i,classes:a,onlyTimepicker:n,isMobile:o}}=this;this._buildBaseHtml(),this.elIsInput&&(s||this._setPositionClasses(i)),!s&&this.elIsInput||this.$datepicker.classList.add("-inline-"),a&&this.$datepicker.classList.add(...a.split(" ")),o&&!t&&this._addMobileAttributes(),this.calendarView=new C({dp:this,opts:e}),this.nav=new S({dp:this,opts:e}),this.$content.appendChild(this.calendarView.$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){this.calendarView.destroy(),this.calendarView=!1,this.nav.destroy()}_addMobileAttributes(){O.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){O.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createIncludeDates(){let{includeDates:e}=this.opts;e&&e.length&&(this.includeDates=e.map((e=>_(e))),this.includeDates.sort(((e,t)=>e-t)),this.minDate=this.includeDates[0],this.maxDate=this.includeDates[this.includeDates.length-1])}_limitViewDateByMaxMinDates(){let{viewDate:e,minDate:t,maxDate:s}=this;s&&v(e,s)&&this.setViewDate(s),t&&m(e,t)&&this.setViewDate(t)}_bindSubEvents(){this.on(o,this._onChangeSelectedDate),this.on(n,this._onChangeFocusedDate)}_buildBaseHtml(){let{inline:e}=this.opts;var t,s;this.elIsInput?e?(t=this.$datepicker,(s=this.$el).parentNode.insertBefore(t,s.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-dateselector--pointer"></i><div class="air-dateselector--navigation"></div><div class="air-dateselector--content"></div>',this.$content=l(".air-dateselector--content",this.$datepicker),this.$pointer=l(".air-dateselector--pointer",this.$datepicker),this.$nav=l(".air-dateselector--navigation",this.$datepicker)}_handleLocale(){let{locale:e,dateFormat:t,firstDay:s,timeFormat:i}=this.opts;var a;this.locale=(a=e,JSON.parse(JSON.stringify(a))),t&&(this.locale.dateFormat=t),void 0!==i&&""!==i&&(this.locale.timeFormat=i),""!==s&&(this.locale.firstDay=s)}_setPositionClasses(e){if("function"==typeof e)return void this.$datepicker.classList.add("-custom-position-");let t=(e=e.split(" "))[0],s=`air-dateselector -${t}-${e[1]}- -from-${t}-`;this.$datepicker.classList.add(...s.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}formatDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,t=arguments.length>1?arguments[1]:void 0;if(e=_(e),!(e instanceof Date))return;let s=t,i=this.locale,a=c(e),n=a.dayPeriod,o=p(e),r=Datepicker.replacer,l={T:e.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:n,AA:n.toUpperCase(),E:i.daysShort[a.day],EEEE:i.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:i.monthsShort[a.month],MMMM:i.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:o[0],yyyy2:o[1]};for(let[e,t]of Object.entries(l))s=r(s,$(e),t);return s}next=()=>{let{year:e,month:t}=this.parsedViewDate;this.setViewDate(new Date(e,t+1,1))};prev=()=>{let{year:e,month:t}=this.parsedViewDate;this.setViewDate(new Date(e,t-1,1))};down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{parsedViewDate:i}=this,{updateTime:a}=s,{moveToOtherMonthsOnSelect:n,autoClose:r,onBeforeSelect:l}=this.opts;if((e=_(e))instanceof Date)return l&&!l({date:e,datepicker:this})?Promise.resolve():(e.getMonth()!==i.month&&n&&(t=new Date(e.getFullYear(),e.getMonth(),1)),t&&this.setViewDate(t),this.selectedDate=e,this.trigger(o,{action:"selectDate",silent:s?.silent,date:e,updateTime:a}),this._updateLastSelectedDate(e),r&&this.visible&&this.hide(),new Promise((e=>{setTimeout(e)})))}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDate=!1,this.trigger(o,{action:"unselectDate",silent:e.silent}),new Promise((e=>{setTimeout(e)}))}show(){let{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:e,isMobile:t}=this.opts,s=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((t=>{!this.customHide&&(t&&s||!t&&!s)&&this._finishHide(),e&&e(t)})),t&&O.classList.remove("-active-")}_finishHide=()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)};setPosition=e=>{if("function"==typeof(e=e||this.opts.position))return void(this.customHide=e({$datepicker:this.$datepicker,$target:this.$el,$pointer:this.$pointer,done:this._finishHide}));let t,s,{isMobile:i}=this.opts,a=this.$el.getBoundingClientRect(),n=this.$el.getBoundingClientRect(),o=this.$datepicker.offsetParent,r=this.$el.offsetParent,l=this.$datepicker.getBoundingClientRect(),h=e.split(" "),d=window.scrollY,c=window.scrollX,u=this.opts.offset,p=h[0],y=h[1];if(i)this.$datepicker.style.cssText="left: 50%; top: 50%";else{if(o===r&&o!==document.body&&(n={top:this.$el.offsetTop,left:this.$el.offsetLeft,width:a.width,height:this.$el.offsetHeight},d=0,c=0),o!==r&&o!==document.body){let e=o.getBoundingClientRect();n={top:a.top-e.top,left:a.left-e.left,width:a.width,height:a.height},d=0,c=0}switch(p){case"top":t=n.top-l.height-u;break;case"right":s=n.left+n.width+u;break;case"bottom":t=n.top+n.height+u;break;case"left":s=n.left-l.width-u}switch(y){case"top":t=n.top;break;case"right":s=n.left+n.width-l.width;break;case"bottom":t=n.top+n.height-l.height;break;case"left":s=n.left;break;case"center":/left|right/.test(p)?t=n.top+n.height/2-l.height/2:s=n.left+n.width/2-l.width/2}this.$datepicker.style.cssText=`left: ${s+c}px; top: ${t+d}px`}};_setInputValue=()=>{let{opts:e,$altField:t,locale:{dateFormat:s}}=this,{altFieldDateFormat:i,altField:a}=e;a&&t&&(t.value=this._getInputValue(i)),this.$el.value=this._getInputValue(s)};_getInputValue=e=>{let{selectedDate:t}=this;return t?"function"==typeof e?e(t):t:""};_triggerOnSelect(){let e,t,{selectedDate:s,locale:i,opts:{onSelect:a}}=this;e=s,t="function"==typeof i.dateFormat?i.dateFormat(s):this.formatDate(s,i.dateFormat),a({date:e,formattedDate:t,datepicker:this})}_checkIfDateIsSelected=e=>{let t=!1;return this.selectedDate&&D(e,this.selectedDate)&&(t=this.selectedDate),t};_handleUpDownActions(e,t){if(!((e=_(e||this.focusDate||this.viewDate))instanceof Date))return;let s="up"===t?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1))}_scheduleCallAfterTransition=e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})};_cancelScheduledCall=()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)};setViewDate=e=>{if(!((e=_(e))instanceof Date))return;if(D(e,this.viewDate))return;let t=this.viewDate;this.viewDate=e;let{onChangeViewDate:s}=this.opts;if(s){let{month:e,year:t}=this.parsedViewDate;s({month:e,year:t,decade:this.curDecade})}this.trigger(a,e,t)};setFocusDate=(()=>{var e=this;return function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t||(t=_(t))instanceof Date)&&(e.focusDate=t,e.trigger(n,t,s))}})();_updateLastSelectedDate=e=>{this.lastSelectedDate=e,this.trigger("changeLastSelectedDate",e)};getCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day";if(!((e=_(e))instanceof Date))return;let{year:s,month:i,date:a}=c(e),n=`[data-year="${s}"]`,o=`[data-month="${i}"]`,r={day:`${n}${o}[data-date="${a}"]`,month:`${n}${o}`,year:`${n}`};return this.calendarView.$el.querySelector(r[t])}destroy=()=>{let{showEvent:e,isMobile:t}=this.opts,s=this.$datepicker.parentNode;s&&s.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.calendarView=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDate=null};update=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=b({},e.opts);b(e.opts,t);let{selectedDate:i,isMobile:a}=e.opts,n=e.visible||e.treatAsInline;e._createMinMaxDates(),e._limitViewDateByMaxMinDates(),e._handleLocale(),!s.selectedDate&&i&&e.selectDate(i),e._setInputValue(),!s.isMobile&&a?(e.treatAsInline||O||e._createMobileOverlay(),e._addMobileAttributes(),e.visible&&e._showMobileOverlay()):s.isMobile&&!a&&(e._removeMobileAttributes(),e.visible&&(O.classList.remove("-active-"),"function"!=typeof e.opts.position&&e.setPosition())),n&&(e.nav.update(),e.calendarView.render(),e.calendarView.renderDayNames())}})();_showMobileOverlay(){O.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((e,t)=>parseFloat(t)+e),0)>0}isOtherMonth=e=>{let{month:t}=c(e);return t!==this.parsedViewDate.month};isOtherYear=e=>{let{year:t}=c(e);return t!==this.parsedViewDate.year};isOtherDecade=e=>{let{year:t}=c(e),[s,i]=p(this.viewDate);return t<s||t>i};_onChangeSelectedDate=e=>{let{silent:t}=e;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()}))};_onChangeFocusedDate=(()=>{var e=this;return function(t){let{viewDateTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return;let i=!1;s&&(i=e.isOtherMonth(t)||e.isOtherYear(t)||e.isOtherDecade(t)),i&&e.setViewDate(t),e.opts.onFocus&&e.opts.onFocus({datepicker:e,date:t})}})();_onFocus=e=>{this.visible||this.show()};_onBlur=e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()};_onMouseDown=e=>{this.inFocus=!0};_onMouseUp=e=>{this.inFocus=!1,this.$el.focus()};_onResize=()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()};_onClickOverlay=()=>{this.visible&&this.hide()};getViewDates=()=>C.getDaysDates(this);get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return c(this.viewDate)}get currentViewSingular(){return"day"}get curDecade(){return p(this.viewDate)}get isFinalView(){return!0}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return!0}get $container(){return this.$customContainer||E}isWeekend=e=>this.opts.weekends.includes(e);getClampedDate=e=>{let{minDate:t,maxDate:s}=this,i=e;return s&&v(e,s)?i=s:t&&m(e,t)&&(i=t),i};static replacer(e,t,s){return e.replace(t,(function(e,t,i,a){return t+s+a}))}}var T;return T=N.prototype,Object.assign(T,A),t.default})()));