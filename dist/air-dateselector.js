!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AirDateTimeselector=e():t.AirDateTimeselector=e()}(this,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?e.querySelector(t):t}function i(){let{tagName:t="div",className:e="",innerHTML:s="",id:i="",attrs:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement(t);return e&&n.classList.add(...e.split(" ")),i&&(n.id=i),s&&(n.innerHTML=s),a&&function(t,e){for(let[s,i]of Object.entries(e))void 0!==i&&t.setAttribute(s,i)}(n,a),n}function a(){let t=[];for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return s.forEach((e=>{if("object"==typeof e)for(let s in e)e[s]&&t.push(s);else e&&t.push(e)})),t.join(" ")}function n(t,e,s){t.length?t.forEach((t=>{t.addEventListener(e,s)})):t.addEventListener(e,s)}function l(t,e){return!(!t||t===document||t instanceof DocumentFragment)&&(t.matches(e)?t:l(t.parentNode,e))}t.d(e,{default:()=>z});const r="days",h="months",o="changeViewDate",d="changeFocusDate",c="changeSelectedDate",u={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0},m=t=>null!=t;function p(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return s.filter((t=>t)).forEach((e=>{for(let[s,i]of Object.entries(e))if(void 0!==i&&"[object Object]"===i.toString()){let e=void 0!==t[s]?t[s].toString():void 0,a=i.toString(),n=Array.isArray(i)?[]:{};t[s]=t[s]?e!==a?n:t[s]:n,p(t[s],i)}else t[s]=i})),t}function v(t,e,s){return t.replace(e,(function(t,e,i,a){return e+s+a}))}function y(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,i=e,a=g(t=M(t)),n=a.dayPeriod,l=f(t),r={T:t.getTime(),m:a.minutes,mm:a.fullMinutes,h:a.hours12,hh:a.fullHours12,H:a.hours,HH:a.fullHours,aa:n,AA:n.toUpperCase(),E:s.daysShort[a.day],EEEE:s.days[a.day],d:a.date,dd:a.fullDate,M:a.month+1,MM:a.fullMonth,MMM:s.monthsShort[a.month],MMMM:s.months[a.month],yy:a.year.toString().slice(-2),yyyy:a.year,yyyy1:l[0],yyyy2:l[1]};for(let[t,e]of Object.entries(r))i=v(i,C(t),e);return i}function g(t){let e=t.getHours(),{hours:s,dayPeriod:i}=function(t){return{dayPeriod:t>11?"pm":"am",hours:t%12==0?12:t%12}}(e);return{year:t.getFullYear(),month:t.getMonth(),fullMonth:t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,date:t.getDate(),fullDate:t.getDate()<10?"0"+t.getDate():t.getDate(),day:t.getDay(),hours:e,fullHours:D(e),hours12:s,dayPeriod:i,fullHours12:D(s),minutes:t.getMinutes(),fullMinutes:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}}function D(t){return t<10?"0"+t:t}function f(t){let e=10*Math.floor(t.getFullYear()/10);return[e,e+9]}function _(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(!t||!e)return!1;let i=g(t),a=g(e);return{[r]:i.date===a.date&&i.month===a.month&&i.year===a.year,[h]:i.month===a.month&&i.year===a.year,years:i.year===a.year}[s]}function b(t,e,s){let i=w(t,!1).getTime(),a=w(e,!1).getTime();return s?i>=a:i>a}function $(t,e){return!b(t,e,!0)}function w(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=new Date(t.getTime());return"boolean"!=typeof e||e||function(t){t.setHours(0,0,0,0)}(s),s}function M(t){let e=t;return t instanceof Date||(e=new Date(t)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${t}" to Date object`),e=!1),e}function C(t){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+t+")($|<|"+e+")","g")}const S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(t){return t<10?"0"+t:`${t}`}function N(t,e){return function(t,e){return t=M(t),m(e)?dObj.toLocaleDateString(e):[L(t.getDate()),L(t.getMonth()+1),t.getFullYear()].join("/")}(t=M(t),e)+", "+function(t,e){return t=M(t),m(e)?t.toLocaleTimeString(e):[L(t.getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":")}(t,e)}const T=t=>{let e;return e=t<=0?4:t>3&&t<21||t%10>3?0:t%10,t+["th","st","nd","rd",""][e]};function E(t,e,s){let i=y(t=M(t),e);if(s&&"pentadal"===s){const[e,s]=function(t){t=M(t);const e=(i=t,new Date(i.getFullYear(),i.getMonth()+1,0)).getDate(),s=t.getDate();var i;return s<=5?[1,"1-5th",1]:s<=10?[2,"6-10th",6]:s<=15?[3,"11-15th",11]:s<=20?[4,"16-20th",16]:s<=25?[4,"21-25th",21]:[6,`26-${T(e)}`,26]}(t);i=`${i} - P${e} ${s}`}return i}function H(t){return[...new Set(t.map((t=>t.getMonth())))]}function k(t){return[...new Set(t.map((t=>t.getDate())))]}function O(t){return[...new Set(t.map((t=>t.getHours())))]}class V{constructor(t){let{dts:e,opts:s}=t;this.dts=e,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents()}_createElement(){this.$el=i({tagName:"nav",className:"air-dts-nav"})}_buildBaseHtml(){this.$el.innerHTML='<div class="air-dts-nav--action" data-action="prevTime"><svg><path d="M 17,12 l -5,5 l 5,5"></path></svg></div><button class="air-dts-nav--title"></button><div class="air-dts-nav--action" data-action="nextTime"><svg><path d="M 14,12 l 5,5 l -5,5"></path></svg></div>'}_defineDOM(){this.$title=s(".air-dts-nav--title",this.$el),this.$prevTime=s('[data-action="prevTime"]',this.$el),this.$nextTime=s('[data-action="nextTime"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle),this.$title.addEventListener("blur",this._onBlur)}_onBlur=t=>{!this.dts.portal.inFocus&&this.dts.portal.visible&&this.dts.portal.hide()};_getTitle(){let{dts:t,opts:e}=this,s=e.dateFormat;return t.formatDate(t.selectedDate,s)}_disableNav(t){s('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){removeClass(this.$el.querySelectorAll(".air-dts-nav--action"),"-disabled-")}onClickNav=t=>{let e=l(t.target,".air-dts-nav--action");if(!e)return;let s=e.dataset.action;this.dts[s]()};onClickNavTitle=()=>{this.dts.toggleSelector()};handleNavStatus(){let{minDate:t,maxDate:e,parsedSelectedDate:s}=this.dts,i=!!t&&g(t),a=!!e&&g(e);t&&i>=s&&this._disableNav("prevTime"),e&&a<=s&&this._disableNav("nextTime")}renderDelay=()=>{setTimeout(this.render)};render=()=>{this.$title.innerHTML=this._getTitle()}}const F={classes:"",locale:u,startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",selectedDate:!1,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},onSelect:!1,onChangeViewDate:!1,onShow:!1,onHide:!1};let B={on(t,e){this.__events||(this.__events={}),this.__events[t]?this.__events[t].push(e):this.__events[t]=[e]},off(t,e){this.__events&&this.__events[t]&&(this.__events[t]=this.__events[t].filter((t=>t!==e)))},removeAllEvents(){this.__events={}},trigger(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];this.__events&&this.__events[t]&&this.__events[t].forEach((t=>{t(...s)}))}};class x{constructor(){let{date:t,ds:e,opts:s,body:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.date=t,this.ds=e,this.opts=s,this.body=i,this.customData=!1,this.init()}init(){this.ds.includeDates&&this.ds.includeDates.find((t=>_(t,this.date)))||(this.customData={disabled:!0}),this._createElement(),this._bindDateselectorEvents(),this._handleInitialFocusStatus(),this.ds.hasSelectedDate&&this._handleSelectedStatus()}_bindDateselectorEvents(){this.ds.on(c,this.onChangeSelectedDate),this.ds.on(d,this.onChangeFocusDate)}unbindDateselectorEvents(){this.ds.off(c,this.onChangeSelectedDate),this.ds.off(d,this.onChangeFocusDate)}_createElement(){let{year:t,month:e,date:s}=g(this.date),a=this.customData?.attrs||{};this.$cell=i({className:this._getClassName(),attrs:{"data-year":t,"data-month":e,"data-date":s,...a}})}_getClassName(){let t=new Date,{selectOtherMonths:e}=this.opts,{minDate:s,maxDate:i}=this.ds,{day:n}=g(this.date),l=this.customData?.disabled,r=a("air-cal-cell","-day-",{"-current-":_(t,this.date),"-min-date-":s&&_(s,this.date),"-max-date-":i&&_(i,this.date)});const h=a({"-weekend-":this.ds.isWeekend(n),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!e||l});return a(r,h,this.customData?.classes)}_getHtml(){let{date:t}=g(this.date),{showOtherMonths:e}=this.opts;return this.customData?.html?this.customData.html:!e&&this.isOtherMonth?"":t}destroy(){this.unbindDateselectorEvents()}focus=()=>{this.$cell.classList.add("-focus-"),this.focused=!0};removeFocus=()=>{this.$cell.classList.remove("-focus-"),this.focused=!1};select=()=>{this.$cell.classList.add("-selected-"),this.selected=!0};removeSelect=()=>{this.$cell.classList.remove("-selected-"),this.selected=!1};_handleSelectedStatus(){let t=this.ds._checkIfDateIsSelected(this.date);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){_(this.ds.focusDate,this.date)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.ds.isOtherMonth(this.date)}get isOtherDecade(){return this.ds.isOtherDecade(this.date)}onChangeSelectedDate=()=>{this.isDisabled||this._handleSelectedStatus()};onChangeFocusDate=t=>{if(!t)return void(this.focused&&this.removeFocus());let e=_(t,this.date);e?this.focus():!e&&this.focused&&this.removeFocus()};render=()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)}const A=".air-cal-cell";class I{constructor(t){let{ds:e,opts:s}=t;this.ds=e,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.renderDayNames(),this.render(),this._bindEvents(),this._bindDateselectorEvents()}_bindEvents(){n(this.$el,"mouseover",this.onMouseOverCell),n(this.$el,"mouseout",this.onMouseOutCell),n(this.$el,"click",this.onClickBody)}_bindDateselectorEvents(){this.ds.on(o,this.onChangeViewDate)}_buildBaseHtml(){this.$el=i({className:"air-cal-body -days-",innerHTML:'<div class="air-cal-body--day-names"></div><div class="air-cal-body--cells -days-"></div>'}),this.$names=s(".air-cal-body--day-names",this.$el),this.$cells=s(".air-cal-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ds.locale.firstDay,e="",s=this.ds.isWeekend,{onClickDayName:i}=this.opts,n=t,l=0;for(;l<7;){let t=n%7;e+=`<div class="${a("air-cal-body--day-name",{"-weekend-":s(t),"-clickable-":!!i})}" data-day-index='${t}'>${this.ds.locale.daysMin[t]}</div>`,l++,n++}return e}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{ds:e,opts:s}=this;return new x({ds:e,opts:s,date:t,body:this})}_generateCells(){I.getDaysDates(this.ds,(t=>{this.cells.push(this._generateCell(t))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((t=>t.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.ds.off(o,this.onChangeViewDate)}handleClick=t=>{let e=t.target.closest(A).adpCell;e.isDisabled||this.ds.selectDate(e.date)};handleDayNameClick=t=>{let e=t.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(e),dateselector:this.ds})};onMouseOverCell=t=>{let e=l(t.target,A);this.ds.setFocusDate(!!e&&e.adpCell.date)};onMouseOutCell=()=>{this.ds.setFocusDate(!1)};onClickBody=t=>{let{onClickDayName:e}=this.opts,s=t.target;s.closest(A)&&this.handleClick(t),e&&s.closest(".air-cal-body--day-name")&&this.handleDayNameClick(t)};onMouseDown=t=>{this.pressed=!0;let e=l(t.target,A);e&&e.adpCell};onMouseUp=()=>{this.pressed=!1};onChangeViewDate=(t,e)=>{this.isVisible&&(_(t,e,h)||this.render())};render=()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((t=>{this.$cells.appendChild(t.render())}))};static getDaysDates(t,e){let{viewDate:s,locale:{firstDay:i}}=t,a=(c=s,new Date(c.getFullYear(),c.getMonth()+1,0).getDate()),{year:n,month:l}=g(s),r=new Date(n,l,1),h=new Date(n,l,a),o=r.getDay()-i,d=6-h.getDay()+i;var c;o=o<0?o+7:o,d=d>6?d-7:d;let u=function(t,e){let{year:s,month:i,date:a}=g(t);return new Date(s,i,a-e)}(r,o),m=a+o+d,p=u.getDate(),{year:v,month:y}=g(u),D=0;const f=[];for(;D<m;){let t=new Date(v,y,p+D);e&&e(t),f.push(t),D++}return f}}class j{constructor(t){let{ds:e,opts:s}=t;this.ds=e,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDateselectorEvents()}_defineDOM(){this.$title=s(".air-cal-nav--title",this.$el),this.$prev=s('[data-action="prev"]',this.$el),this.$next=s('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav)}_bindDateselectorEvents(){this.ds.on(o,this.onChangeViewDate),this.isNavIsFunction&&this.ds.on(c,this.renderDelay)}destroy(){this.ds.off(o,this.onChangeViewDate),this.isNavIsFunction&&this.ds.off(c,this.renderDelay)}_createElement(){this.$el=i({tagName:"nav",className:"air-cal-nav"})}_getTitle(){let{ds:t,opts:e}=this,s=e.navTitles.days;return"function"==typeof s?s(t):t.formatDate(t.viewDate,s)}handleNavStatus(){let{minDate:t,maxDate:e}=this.ds;if(!t&&!e)return;let{year:s,month:i}=this.ds.parsedViewDate,a=!!t&&g(t),n=!!e&&g(e);t&&a.month>=i&&a.year>=s&&this._disableNav("prev"),e&&n.month<=i&&n.year<=s&&this._disableNav("next")}_disableNav(t){s('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];t.length?t.forEach((t=>{t.classList.remove(...s)})):t.classList.remove(...s)}(this.$el.querySelectorAll(".air-cal-nav--action"),"-disabled-")}onClickNav=t=>{let e=l(t.target,".air-cal-nav--action");if(!e)return;let s=e.dataset.action;this.ds[s]()};onChangeViewDate=()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()};_buildBaseHtml(){let{prevHtml:t,nextHtml:e}=this.opts;this.$el.innerHTML=`<div class="air-cal-nav--action" data-action="prev">${t}</div><div class="air-cal-nav--title"></div><div class="air-cal-nav--action" data-action="next">${e}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find((e=>"function"==typeof t[e]))}update=()=>{let{prevHtml:t,nextHtml:e}=this.opts;this.$prev.innerHTML=t,this.$next.innerHTML=e,this._resetNavStatus(),this.render(),this.handleNavStatus()};renderDelay=()=>{setTimeout(this.render)};render=()=>{this.$title.innerHTML=this._getTitle()}}class P{static defaults=F;constructor(t,e){if(this.$el=s(t),!this.$el)return;this.$dateselector=i({className:"air-cal"}),this.opts=p({},F,e);let{startDate:a}=this.opts;a||(this.opts.startDate=new Date),this.inited=!1,this.viewDate=M(this.opts.startDate),this.focusDate=!1,this.selectedDate=null,this.calendarView=null,this.init()}init(){let{opts:{selectedDate:t}}=this;this._handleLocale(),this._bindSubEvents(),this._createIncludeDates(),this._limitViewDateByMaxMinDates(),this._bindEvents(),t&&this.selectDate(t,{silent:!0}),this._createComponents()}_createComponents(){let{opts:t,opts:{classes:e}}=this;this._buildBaseHtml(),this.$dateselector.classList.add("-inline-"),e&&this.$dateselector.classList.add(...e.split(" ")),this.calendarView=new I({ds:this,opts:t}),this.nav=new j({ds:this,opts:t}),this.$content.appendChild(this.calendarView.$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){this.calendarView.destroy(),this.calendarView=!1,this.nav.destroy()}_createIncludeDates(){let{includeDates:t}=this.opts;t&&t.length&&(this.includeDates=t.map((t=>M(t))),this.includeDates.sort(((t,e)=>t-e)),this.minDate=this.includeDates[0],this.maxDate=this.includeDates[this.includeDates.length-1])}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:e,maxDate:s}=this;s&&b(t,s)&&this.setViewDate(s),e&&$(t,e)&&this.setViewDate(e)}_bindSubEvents(){this.on(c,this._onChangeSelectedDate)}_buildBaseHtml(){this.$el.appendChild(this.$dateselector),this.$dateselector.innerHTML='<div class="air-cal--navigation"></div><div class="air-cal--content"></div>',this.$content=s(".air-cal--content",this.$dateselector),this.$nav=s(".air-cal--navigation",this.$dateselector)}_handleLocale(){let{locale:t,dateFormat:e,firstDay:s,timeFormat:i}=this.opts;var a;this.locale=(a=t,JSON.parse(JSON.stringify(a))),e&&(this.locale.dateFormat=e),void 0!==i&&""!==i&&(this.locale.timeFormat=i),""!==s&&(this.locale.firstDay=s)}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$dateselector.addEventListener("mousedown",this._onMouseDown),this.$dateselector.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}formatDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,e=arguments.length>1?arguments[1]:void 0;return t=M(t),y(t,e,this.locale)}next=()=>{let{year:t,month:e}=this.parsedViewDate;this.setViewDate(new Date(t,e+1,1))};prev=()=>{let{year:t,month:e}=this.parsedViewDate;this.setViewDate(new Date(t,e-1,1))};down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{parsedViewDate:i}=this,{updateTime:a}=s,{moveToOtherMonthsOnSelect:n,autoClose:l,onBeforeSelect:r}=this.opts;if((t=M(t))instanceof Date)return r&&!r({date:t,dateselector:this})?Promise.resolve():(t.getMonth()!==i.month&&n&&(e=new Date(t.getFullYear(),t.getMonth(),1)),e&&this.setViewDate(e),this.selectedDate=t,this.trigger(c,{action:"selectDate",silent:s?.silent,date:t,updateTime:a}),this._updateLastSelectedDate(t),new Promise((t=>{setTimeout(t)})))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDate=!1,this.trigger(c,{action:"unselectDate",silent:t.silent}),new Promise((t=>{setTimeout(t)}))}show(){this._createComponents(),this.$dateselector.classList.add("-active-")}hide(){this.$dateselector.classList.remove("-active-")}_getInputValue=t=>{let{selectedDate:e}=this;return e?"function"==typeof t?t(e):e:""};_triggerOnSelect(){let{onSelect:t}=this.opts;t(this.selectedDate)}_checkIfDateIsSelected=t=>{let e=!1;return this.selectedDate&&_(t,this.selectedDate)&&(e=this.selectedDate),e};_handleUpDownActions(t,e){if(!((t=M(t||this.focusDate||this.viewDate))instanceof Date))return;let s="up"===e?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1))}setViewDate=t=>{if(!((t=M(t))instanceof Date))return;if(_(t,this.viewDate))return;let e=this.viewDate;this.viewDate=t;let{onChangeViewDate:s}=this.opts;if(s){let{month:t,year:e}=this.parsedViewDate;s({month:t,year:e,decade:this.curDecade})}this.trigger(o,t,e)};setFocusDate=(()=>{var t=this;return function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=M(e))instanceof Date)&&(t.focusDate=e,t.trigger(d,e,s))}})();_updateLastSelectedDate=t=>{this.lastSelectedDate=t,this.trigger("changeLastSelectedDate",t)};getCell(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day";if(!((t=M(t))instanceof Date))return;let{year:s,month:i,date:a}=g(t),n=`[data-year="${s}"]`,l=`[data-month="${i}"]`,r={day:`${n}${l}[data-date="${a}"]`,month:`${n}${l}`,year:`${n}`};return this.calendarView.$el.querySelector(r[e])}destroy=()=>{let t=this.$dateselector.parentNode;t&&t.removeChild(this.$dateselector),window.removeEventListener("resize",this._onResize),this.calendarView=null,this.nav=null,this.$dateselector=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDate=null};update=(()=>{var t=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=p({},t.opts);p(t.opts,e);let{selectedDate:i}=t.opts;t._createMinMaxDates(),t._limitViewDateByMaxMinDates(),t._handleLocale(),!s.selectedDate&&i&&t.selectDate(i),t.nav.update(),t.calendarView.render(),t.calendarView.renderDayNames()}})();_showMobileOverlay(){"".classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$dateselector).getPropertyValue("transition-duration").split(", ").reduce(((t,e)=>parseFloat(e)+t),0)>0}isOtherMonth=t=>{let{month:e}=g(t);return e!==this.parsedViewDate.month};isOtherYear=t=>{let{year:e}=g(t);return e!==this.parsedViewDate.year};isOtherDecade=t=>{let{year:e}=g(t),[s,i]=f(this.viewDate);return e<s||e>i};_onChangeSelectedDate=t=>{let{silent:e}=t;setTimeout((()=>{this._triggerOnSelect()}))};getViewDates=()=>I.getDaysDates(this);get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return g(this.viewDate)}get curDecade(){return f(this.viewDate)}get hasSelectedDate(){return this.selectedDate}get $container(){return this.$customContainer||""}isWeekend=t=>this.opts.weekends.includes(t);getClampedDate=t=>{let{minDate:e,maxDate:s}=this,i=t;return s&&b(t,s)?i=s:e&&$(t,e)&&(i=e),i}}var Y;Y=P.prototype,Object.assign(Y,B);class R{constructor(t){let{dts:e,opts:s}=t;this.dts=e,this.opts=s,this.$el=i({className:"air-dts--content"}),this.includeDates=this.opts.includeDates||[],this.datesObject=function(t){const e=[...new Set(t.map((t=>t.getFullYear())))],s=[...new Set(e.map((t=>Math.floor(t/100))))],i=s.reduce(((s,i)=>p(s,function(t,e,s){const i=s.filter((e=>Math.floor(e/100)===t)),a=function(t,e){return e.filter((e=>Math.floor(e.getFullYear()/100)===t))}(t,e),n={[t]:i.reduce(((t,s)=>p(t,function(t,e){const s=function(t,e){return e.filter((e=>e.getFullYear()===t))}(t,e),i={};return H(s).forEach((t=>{const e=function(t,e){return t.filter((t=>t.getMonth()===e))}(s,t),a={};k(e).forEach((t=>{a.dates=e,a.indice=k(e);const s={},i=function(t,e){return t.filter((t=>t.getDate()===e))}(e,t);O(i).forEach((t=>{s[t]=function(t,e){return t.filter((t=>t.getHours()===e))}(i,t),s.dates=i,s.indice=O(i)})),a[t]=s})),i[t]=a,i.indice=H(s),i.dates=s})),{[t]:i}}(s,e))),{})};return n[t].dates=a,n[t].indice=i,n}(i,t,e))),{});return i.dates=t,i.indice=s,i}(this.includeDates),this.state={century:null,year:null,month:null,day:null,time:null,hour:null,granularity:null},this.init()}init(){this._initState()}_initState(){let t=null,e=null,s=null,i=null,a="century";const{datesObject:n}=this;if(1===n.indice.length){const l=n.indice[0],r=n[l];if(t=l,1===r.indice.length){const t=r.indice[0],n=r[t];if(e=t,a="year",1===n.indice.length){const t=n.indice[0],e=n[t];s=t,a="month",1===e.indice&&(i=e.indice[0])}}}this._setState({century:t,year:e,month:s,day:i,time:null,granularity:a})}_setState(t){this.state={...this.state,...t},this.render()}_buildCenturyGrid(t){if(t.dates&&t.dates.length>=12){const e=t.indice,s=i({className:"grid",innerHTML:'<div class="gridHeading"> Select a century</div>'});return e.forEach((t=>{const e=i({tagName:"button",className:"centuryBtn",innerHTML:`${t}00`});e.addEventListener("click",(()=>{this._setState({century:t})})),s.appendChild(e)})),s}return this._buildList(t.dates)}_buildYearGrid(t){if(t.dates&&t.dates.length>=12){const e=t.indice,a=Array.apply(null,{length:12}).map(Number.call,Number),n=i({className:"grid",innerHTML:'<div class="gridHeading"> Select a year</div><div class="gridBody"></div>'}),l=s(".gridBody",n);return e.forEach((e=>{const n=i({className:"gridRow",innerHTML:`<span class="gridLabel">${e}</span><span class="gridRowInner12"></span>`});n.addEventListener("click",(()=>{this._setState({year:e,month:null,day:null,time:null})})),a.forEach((a=>{const l=i({tagName:"span",className:t[e][a]?"activeGrid":""});s(".gridRowInner12",n).appendChild(l)})),l.appendChild(n)})),n}return this._buildList(t.dates)}_buildMonthGrid(t){const e=this.state.year;if(t[e].dates&&t[e].dates.length>12){const n=i({className:"grid",innerHTML:'<div class="gridHeading"></div><div class="gridBody"></div>'}),l=s(".gridBody",n),r=i({tagName:"button",className:"backbtn",innerHTML:this.state.year});return r.addEventListener("click",(()=>{this._setState({year:null,month:null,day:null,time:null})})),s(".gridHeading",n).appendChild(r),S.forEach(((n,r)=>{const h=i({className:a("gridRow",{inactiveGridRow:!m(t[e][r])}),innerHTML:`<span class="gridLabel">${n}</span><span class="gridRowInner31"></span>`});h.addEventListener("click",(()=>{m(t[e][r])&&this._setState({month:r,day:null,time:null})}));const o=s(".gridRowInner31",h);(function(t,e){const s=new Date(e,t,0).getDate();return Array.apply(null,{length:s}).map(Number.call,Number)})(r,e).forEach((s=>{const n=i({tagName:"span",className:a({activeGrid:m(t[e][r])&&m(t[e][r][s+1])})});o.appendChild(n)})),l.appendChild(h)})),n}return this._buildList(t[e].dates)}_buildDayView(t){if(t[this.state.year][this.state.month].dates&&t[this.state.year][this.state.month].dates.length>31){const t=i({className:"dayPicker",innerHTML:'<div class="daypicker-wrapper"></div>'}),e=s(".daypicker-wrapper",t),a=i({tagName:"button",className:"backbtn",innerHTML:this.state.year});a.addEventListener("click",(()=>{this._setState({year:null,month:null,day:null,time:null})}));const n=i({tagName:"button",className:"backbtn",innerHTML:S[this.state.month]});return n.addEventListener("click",(()=>{this._setState({month:null,day:null,time:null})})),e.appendChild(a),e.appendChild(n),this.dateSelector=new P(t,{includeDates:this.includeDates,onSelect:t=>{this._setState({day:t.getDate()})}}),this.dateSelector.$el}return this._buildList(t[this.state.year][this.state.month].dates)}_buildHourView(t){if(t[this.state.year][this.state.month][this.state.day].dates.map((t=>({value:t,label:N(t)}))).length>24){const e=i({className:"grid",innerHTML:`<div class="gridHeading">Select an hour on ${this.state.day} ${S[this.state.month+1]} ${this.state.year} </div><div class='gridBody'></div>`}),a=s(".gridBody",e);return t[this.state.year][this.state.month][this.state.day].indice.forEach((e=>{const s=`${t[this.state.year][this.state.month][this.state.day][e].length}`,n=i({tagName:"button",className:"dateBtn",innerHTML:`<span>${e} : 00 - ${e+1} : 00 </span> <span>(${s} options)</span>`});n.addEventListener("click",(()=>{this._setState({hour:e})})),a.appendChild(n)})),e}return this._buildList(t[this.state.year][this.state.month][this.state.day].dates)}_buildMinutesView(t){const e=t[this.state.year][this.state.month][this.state.day][this.state.hour];return this._buildList(e)}_buildList(t){const e=i({className:"grid",innerHTML:'<div class="gridHeading">Select a time</div><div class="gridBody"></div>'}),a=s(".gridBody",e);return t.forEach((t=>{const e=i({tagName:"button",className:"dateBtn",innerHTML:m(this.opts.dateFormat)?E(t,this.opts.dateFormat.currentTime,this.opts.dateFormat.asPeriod):N(t)});e.addEventListener("click",(()=>{this.dts.portal.hide(t),this.opts.onChange&&this.opts.onChange(t)})),a.appendChild(e)})),e}goBack=()=>{m(this.state.time)?(m(this.state.month)||this._setState({year:null,month:null,day:null}),m(this.state.hour)||this._setState({day:null}),m(this.state.day)||this._setState({month:null,day:null}),this._setState({hour:null,time:null})):m(this.state.hour)?this._setState({hour:null,time:null}):m(this.state.day)?this._setState({day:null,time:null,hour:null}):m(this.state.month)?this._setState({month:null,time:null,day:null,hour:null}):m(this.state.year)?this._setState({year:null,month:null,time:null,day:null,hour:null}):m(this.state.century)&&this._setState({century:null,year:null,month:null,time:null,day:null,hour:null})};destroy(){this.$el.innerHTML=""}_buildBackBtn(){const t=i({tagName:"button",className:"backbutton",innerHTML:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',attrs:{...!this.state[this.state.granularity]&&{disabled:!0}}});return t.addEventListener("click",this.goBack),t}render(){this.destroy();const{datesObject:t}=this,{century:e,year:s,month:i,day:a,hour:n}=this.state;this.$el.appendChild(this._buildBackBtn()),m(e)?!m(e)||m(s)?!m(s)||m(i)?m(s)&&m(i)&&!m(a)?this.$el.appendChild(this._buildDayView(t[e])):m(s)&&m(i)&&m(a)&&!m(n)?this.$el.appendChild(this._buildHourView(t[e])):m(s)&&m(i)&&m(a)&&m(n)&&this.$el.appendChild(this._buildMinutesView(t[e])):this.$el.appendChild(this._buildMonthGrid(t[e])):this.$el.appendChild(this._buildYearGrid(t[e])):this.$el.appendChild(this._buildCenturyGrid(t))}}let G="",J=!1;class U{static defaultGlobalContainerId="air-dts-portal-container";static buildGlobalContainer(t){J=!0,G=i({className:t,id:t}),s("body").appendChild(G)}constructor(t){let{dts:e,opts:s}=t;this.dts=e,this.opts=s,this.$portal=i({className:"air-dts air-dts-portal"}),this.inited=!1,this.visible=!1,this.inFocus=!1,this.init()}init(){let t=s("body");(!J||J&&G&&!t.contains(G))&&U.buildGlobalContainer(U.defaultGlobalContainerId),this._bindEvents()}_bindEvents(){this.$portal.addEventListener("mousedown",this._onMouseDown),this.$portal.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_onMouseDown=t=>{this.inFocus=!0};_onMouseUp=t=>{this.inFocus=!1,this.dts.nav.$title.focus()};_onResize=()=>{this.visible&&this.setPosition()};toggleVisibility(){this.visible?this.hide():this.show()}show(){this.visible||this._createComponents(),this.setPosition(),this.$portal.classList.add("-active-"),this.visible=!0}hide(){this.visible=!1,this.$portal.classList.remove("-active-"),this.$portal.innerHTML="",this._destroyComponents(),this.$container.removeChild(this.$portal)}_setPositionClasses(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom left";t=t.split(" ");let e=t[0],s=`-${e}-${t[1]}- -from-${e}-`;this.$portal.classList.add(...s.split(" "))}_destroyComponents(){this.body.destroy()}setPosition=()=>{let t,e,s=this.dts.$el.getBoundingClientRect(),i=this.dts.$el.getBoundingClientRect(),a=this.$portal.offsetParent,n=this.dts.$el.offsetParent,l=this.$portal.getBoundingClientRect(),r="bottom left".split(" "),h=window.scrollY,o=window.scrollX,d=this.opts.offset,c=r[0],u=r[1];if(a===n&&a!==document.body&&(i={top:this.$el.offsetTop,left:this.$el.offsetLeft,width:s.width,height:this.$el.offsetHeight},h=0,o=0),a!==n&&a!==document.body){let t=a.getBoundingClientRect();i={top:s.top-t.top,left:s.left-t.left,width:s.width,height:s.height},h=0,o=0}switch(c){case"top":t=i.top-l.height-d;break;case"right":e=i.left+i.width+d;break;case"bottom":t=i.top+i.height+d;break;case"left":e=i.left-l.width-d}switch(u){case"top":t=i.top;break;case"right":e=i.left+i.width-l.width;break;case"bottom":t=i.top+i.height-l.height;break;case"left":e=i.left;break;case"center":/left|right/.test(c)?t=i.top+i.height/2-l.height/2:e=i.left+i.width/2-l.width/2}this.$portal.style.cssText=`left: ${e+o}px; top: ${t+h}px`};get $container(){return G}_createComponents(){let{opts:t,dts:e}=this;this._buildBaseHtml(),this._setPositionClasses(),this.body=new R({dts:e,opts:t}),this.$portal.appendChild(this.body.$el)}_buildBaseHtml(){this.$container.appendChild(this.$portal)}}class z{constructor(t,e){this.$el=s(t),this.$el&&(this.$nav=i({className:"air-dts air-dts--navigation"}),this.$el.appendChild(this.$nav),this.opts=e,this.opts.includeDates&&(this.opts.includeDates=this.opts.includeDates.map((t=>M(t)))),this.init())}init(){this._createComponents(),this._bindEvents()}closePortal=()=>{this.portal.hide()};_createComponents(){let{opts:t}=this;this.nav=new V({dts:this,opts:t}),this.$nav.appendChild(this.nav.$el),t={...t,offset:2},this.portal=new U({dts:this,opts:t})}_bindEvents(){this.$nav.addEventListener("blur",this._onBlur)}_onBlur=t=>{console.log("blur")};formatDate(){return arguments.length>0&&void 0!==arguments[0]||this.selectedDate,"2024-01-01 00:00 AM"}toggleSelector(){this.portal.toggleVisibility()}prevTime(){console.log("prevTime")}nextTime(){console.log("nextTime")}render(){}}return e.default})()));